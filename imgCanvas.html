<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>大尺寸广告图展示</title>
</head>
<body>
    <div id="ad1" style="width:400px;height:400px;overflow:hidden">
        <!-- 请自行添加canvas元素 -->
    </div>
    <div id="ad2" style="width:500px;height:700px;overflow:hidden">
</div>
<script>
    function drawLargeImage($container, imageSrc) {
        // 请补充方法体
        //检查支持性
        var img = new Image();
        img.onload = function () {
            for (var i = 0; i <= Math.round(img.height/(40000 /img.width)); i++) {
                var canvas = document.createElement("canvas");
                if (canvas.getContext) {
                    canvas.width = img.width;
                    canvas.height = 40000 / img.width;
                    var ctx = canvas.getContext("2d");
                    //判断图片有效性
                    if (img.fileSize < 0 || (img.width < 0 && img.height < 0)) {
                        return alert("图片不支持");
                    }
                    //画图
                    ctx.drawImage(img, 0, canvas.height * i, img.width, 40000 / img.width, 0, 0, img.width, 40000 /
                        img.width);
                        console.log(i);
                    
                } else {
                    alert("设备不支持");
                }
                //清理白边
                canvas.style.display="block";
                $container.appendChild(canvas);
            }
        };
        img.src = imageSrc;
    }
        drawLargeImage(document.getElementById('ad1'),
            'https://gw.alicdn.com/tfs/TB163pKdMmTBuNjy1XbXXaMrVXa-400-400.jpg');
        drawLargeImage(document.getElementById('ad2'),
            'https://gw.alicdn.com/tfs/TB1EaOddKuSBuNjy1XcXXcYjFXa-500-700.jpg');
    </script>
</body>

</html>
